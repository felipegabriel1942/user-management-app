<div class="p-3">
  <button
    class="btn btn-success my-3 float-right"
    (click)="onCreateUserBtnClicked()"
  >
    Create user
  </button>

  <app-user-table
    [page]="page"
    (onEditClick)="onEditUserBtnClicked($event)"
    (onDeleteClick)="onDeleteUserBtnClicked($event)"
    (onPageChange)="getUsers($event)"
    (onChangePasswordClick)="onUpdatePasswordClicked($event)"
  ></app-user-table>

  <app-modal
    [id]="modal.CREATE_USER"
    [title]="isCreatingUser() ? 'Create user' : 'Update user'"
  >
    <div body class="p-4">
      <app-user-form [form]="form"></app-user-form>
    </div>
    <div footer>
      <button
        class="btn btn-danger mx-1"
        (click)="closeModal(modal.CREATE_USER)"
      >
        Cancel
      </button>
      <button class="btn btn-primary mx-1" (click)="onSaveBtnClick()">
        Save
      </button>
    </div>
  </app-modal>

  <app-modal [id]="modal.DELETE_USER" [title]="'Delete user'">
    <div body class="p-4">
      <p class="text-center">Are you sure you want to delete this user?</p>
    </div>
    <div footer>
      <button
        class="btn btn-danger mx-1"
        (click)="closeModal(modal.DELETE_USER)"
      >
        Cancel
      </button>
      <button class="btn btn-primary mx-1" (click)="delete()">Delete</button>
    </div>
  </app-modal>

  <app-modal [id]="modal.UPDATE_PASSWORD" [title]="'Update password'">
    <div body class="p-4">
      <form [formGroup]="form">
        <div class="form-group">
          <label>Password</label>
          <input
            class="form-control"
            formControlName="password"
            type="password"
          />
          <p
            class="text-danger small"
            *ngIf="form.get('password').invalid && form.get('password').touched"
          >
            Password is obrigatory!
          </p>
        </div>
      </form>
    </div>
    <div footer>
      <button
        class="btn btn-danger mx-1"
        (click)="closeModal(modal.UPDATE_PASSWORD)"
      >
        Cancel
      </button>
      <button class="btn btn-primary mx-1" (click)="updatePassword()">
        Update
      </button>
    </div>
  </app-modal>
</div>
